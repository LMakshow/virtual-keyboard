(()=>{"use strict";const e=[[{key:{ru:"—ë",en:"`"},shift:{ru:"–Å",en:"~"},code:"Backquote"},{key:{ru:"1",en:"1"},shift:{ru:"!",en:"!"},code:"Digit1"},{key:{ru:"2",en:"2"},shift:{ru:'"',en:"@"},code:"Digit2"},{key:{ru:"3",en:"3"},shift:{ru:"‚Ññ",en:"#"},code:"Digit3"},{key:{ru:"4",en:"4"},shift:{ru:";",en:"$"},code:"Digit4"},{key:{ru:"5",en:"5"},shift:{ru:"%",en:"%"},code:"Digit5"},{key:{ru:"6",en:"6"},shift:{ru:":",en:"^"},code:"Digit6"},{key:{ru:"7",en:"7"},shift:{ru:"?",en:"&"},code:"Digit7"},{key:{ru:"8",en:"8"},shift:{ru:"*",en:"*"},code:"Digit8"},{key:{ru:"9",en:"9"},shift:{ru:"(",en:"("},code:"Digit9"},{key:{ru:"0",en:"0"},shift:{ru:")",en:")"},code:"Digit0"},{key:{ru:"-",en:"-"},shift:{ru:"_",en:"_"},code:"Minus"},{key:{ru:"=",en:"="},shift:{ru:"+",en:"+"},code:"Equal"},{key:"Backspace",code:"Backspace",class:"key_backspace",noType:!0}],[{key:"Tab",code:"Tab",class:"key_tab",noType:!0},{key:{ru:"–π",en:"q"},shift:{ru:"–ô",en:"Q"},code:"KeyQ"},{key:{ru:"—Ü",en:"w"},shift:{ru:"–¶",en:"W"},code:"KeyW"},{key:{ru:"—É",en:"e"},shift:{ru:"–£",en:"E"},code:"KeyE"},{key:{ru:"–∫",en:"r"},shift:{ru:"–ö",en:"R"},code:"KeyR"},{key:{ru:"–µ",en:"t"},shift:{ru:"–ï",en:"T"},code:"KeyT"},{key:{ru:"–Ω",en:"y"},shift:{ru:"–ù",en:"Y"},code:"KeyY"},{key:{ru:"–≥",en:"u"},shift:{ru:"–ì",en:"U"},code:"KeyU"},{key:{ru:"—à",en:"i"},shift:{ru:"–®",en:"I"},code:"KeyI"},{key:{ru:"—â",en:"o"},shift:{ru:"–©",en:"O"},code:"KeyO"},{key:{ru:"–∑",en:"p"},shift:{ru:"–ó",en:"P"},code:"KeyP"},{key:{ru:"—Ö",en:"["},shift:{ru:"–•",en:"{"},code:"BracketLeft"},{key:{ru:"—ä",en:"]"},shift:{ru:"–™",en:"}"},code:"BracketRight"},{key:{ru:"\\",en:"\\"},shift:{ru:"|",en:"|"},code:"Backslash",class:"key_backslash"},{key:"Del",code:"Delete",class:"key_del",noType:!0}],[{key:'<span class="caps_icon">‚Ä¢</span><div>Caps<br>Lock</div>',code:"CapsLock",class:"key_capslock",noType:!0},{key:{ru:"—Ñ",en:"a"},shift:{ru:"–§",en:"A"},code:"KeyA"},{key:{ru:"—ã",en:"s"},shift:{ru:"–´",en:"S"},code:"KeyS"},{key:{ru:"–≤",en:"d"},shift:{ru:"–í",en:"D"},code:"KeyD"},{key:{ru:"–∞",en:"f"},shift:{ru:"–ê",en:"F"},code:"KeyF"},{key:{ru:"–ø",en:"g"},shift:{ru:"–ü",en:"G"},code:"KeyG"},{key:{ru:"—Ä",en:"h"},shift:{ru:"–†",en:"H"},code:"KeyH"},{key:{ru:"–æ",en:"j"},shift:{ru:"–û",en:"J"},code:"KeyJ"},{key:{ru:"–ª",en:"k"},shift:{ru:"–õ",en:"K"},code:"KeyK"},{key:{ru:"–¥",en:"l"},shift:{ru:"–î",en:"L"},code:"KeyL"},{key:{ru:"–∂",en:";"},shift:{ru:"–ñ",en:":"},code:"Semicolon"},{key:{ru:"—ç",en:"'"},shift:{ru:"–≠",en:'"'},code:"Quote"},{key:"Enter",code:"Enter",class:"key_enter",noType:!0}],[{key:"Shift",code:"ShiftLeft",class:"key_leftshift",noType:!0},{key:{ru:"—è",en:"z"},shift:{ru:"–Ø",en:"Z"},code:"KeyZ"},{key:{ru:"—á",en:"x"},shift:{ru:"–ß",en:"X"},code:"KeyX"},{key:{ru:"—Å",en:"c"},shift:{ru:"–°",en:"C"},code:"KeyC"},{key:{ru:"–º",en:"v"},shift:{ru:"–ú",en:"V"},code:"KeyV"},{key:{ru:"–∏",en:"b"},shift:{ru:"–ò",en:"B"},code:"KeyB"},{key:{ru:"—Ç",en:"n"},shift:{ru:"–¢",en:"N"},code:"KeyN"},{key:{ru:"—å",en:"m"},shift:{ru:"–¨",en:"M"},code:"KeyM"},{key:{ru:"–±",en:","},shift:{ru:"–ë",en:"<"},code:"Comma"},{key:{ru:"—é",en:"."},shift:{ru:"–Æ",en:">"},code:"Period"},{key:{ru:".",en:"/"},shift:{ru:",",en:"?"},code:"Slash"},{key:"‚ñ≤",code:"ArrowUp",noType:!0},{key:"Shift",code:"ShiftRight",class:"key_rightshift",noType:!0}],[{key:"Ctrl",code:"ControlLeft",class:"key_leftctrl",noType:!0},{key:"Alt",code:"AltLeft",class:"key_leftalt",noType:!0},{key:" ",code:"Space",class:"key_space"},{key:"Alt",code:"AltRight",class:"key_rightalt",noType:!0},{key:"Ctrl",code:"ControlRight",class:"key_rightctrl",noType:!0},{key:"‚óÑ",code:"ArrowLeft",noType:!0},{key:"‚ñº",code:"ArrowDown",noType:!0},{key:"‚ñ∫",code:"ArrowRight",noType:!0},{key:{ru:"üá∑üá∫",en:"üá∫üá∏"},code:"Lang",class:"key_lang",noType:!0}]],t=(e,t,...n)=>{const s=document.createElement(e);return s.classList.add(...n),s.innerHTML=t,s},{body:n}=document,s=t("textarea","","textfield"),o=new class{constructor(){this.lang="en",this.caps="off",this.shift=!1}languageCheck(){localStorage.getItem("lang")?this.lang=localStorage.getItem("lang"):localStorage.setItem("lang",this.lang)}languageChange(e){"en"===this.lang?this.lang="ru":this.lang="en",localStorage.setItem("lang",this.lang),this.updateKeyboard(e)}capsLockIcon(){"on"===this.caps?document.querySelector(".caps_icon").classList.add("caps_on"):document.querySelector(".caps_icon").classList.remove("caps_on")}changeCapsLock(e){"on"===this.caps?this.caps="off":this.caps="on",this.capsLockIcon(),this.updateKeyboard(e)}updateKeyboard(e){const{lang:t}=this;e.shiftKey||this.shift?document.querySelectorAll(".key").forEach((e=>{e.dataset[`${t}Shift`]?"on"===this.caps?e.innerHTML=e.dataset[`${t}Shift`].toLowerCase():e.innerHTML=e.dataset[`${t}Shift`]:e.dataset[t]&&(e.innerHTML=e.dataset[t])})):document.querySelectorAll(".key").forEach((n=>{n.dataset[t]&&("on"!==this.caps||e.shiftKey||this.shift?n.innerHTML=n.dataset[t]:n.innerHTML=n.dataset[t].toUpperCase())}))}removeShift(e){this.shift&&(this.shift=!this.shift,document.querySelector(".key_leftshift").classList.remove("active"),document.querySelector(".key_rightshift").classList.remove("active"),this.updateKeyboard(e))}generateKeyboard(){const n=t("div","","keyboard"),s=t("div","","keyboard__container");this.languageCheck();for(let n=0;n<e.length;n+=1){const o=t("div","","keyboard__row");e[n].forEach((e=>{const n=e.key.ru&&e.key.en?e.key[this.lang]:e.key,s=t("div",n,"key");e.class&&s.classList.add(e.class),s.dataset.code=e.code,e.key.ru&&e.key.en&&(s.dataset.ru=e.key.ru,s.dataset.en=e.key.en),e.shift&&(s.dataset.ruShift=e.shift.ru,s.dataset.enShift=e.shift.en),e.noType&&(s.dataset.noType=!0),o.append(s)})),s.append(o)}return n.append(s),n}},a=t("footer","Maksym Lytvyn ¬© 2022","footer"),c=(e,t,n)=>{let a="",c=s.selectionStart;if(e.preventDefault(),s.focus(),"CapsLock"===n&&o.changeCapsLock(e),("AltLeft"===n&&(e.shiftKey||o.shift)||"AltRight"===n&&(e.shiftKey||o.shift)||"ShiftLeft"===n&&e.altKey||"ShiftRight"===n&&e.altKey||"Lang"===n)&&(o.languageChange(e),o.removeShift(e)),"ShiftLeft"!==n&&"ShiftRight"!==n||o.updateKeyboard(e),"ArrowLeft"===n&&c>0&&s.setSelectionRange(c-1,c-1),"ArrowRight"===n&&(c=s.selectionEnd,s.setSelectionRange(c+1,c+1)),"ArrowUp"===n){const e=s.value.substring(0,c).split("\n");1===e.length||e[e.length-1].length>=57?c-=57:e[e.length-1].length<=e[e.length-2].length%57?c-=e[e.length-2].length%57+1:c-=e[e.length-1].length+1,c<0&&(c=0),s.setSelectionRange(c,c)}if("ArrowDown"===n){c=s.selectionEnd;const e=s.value.substring(0,c).split("\n"),t=s.value.substring(s.selectionEnd).split("\n");1===t.length||t[0].length>=57?c+=57:e[e.length-1].length%57>t[1].length?c+=t[0].length+t[1].length+1:e[e.length-1].length+t[0].length>57?c+=t[0].length:c+=e[e.length-1].length%57+t[0].length+1,s.setSelectionRange(c,c)}if("Tab"===n&&(a="    "),"Enter"===n&&(a="\n"),"Backspace"===n&&(a="-1"),"Delete"===n&&(a="+1"),t.dataset.noType||(a=t.textContent,o.removeShift(e)),a){let e=s.value.substring(0,c),t=s.value.substring(s.selectionEnd);"-1"===a&&(a="",c===s.selectionEnd?(e=e.slice(0,-1),c-=c>0?2:1):c-=1),"+1"===a&&(a="",c===s.selectionEnd&&(t=t.slice(1)),c-=1),s.value=e+a+t,s.setSelectionRange(c+1,c+1),"    "===a&&s.setSelectionRange(c+4,c+4)}};window.onload=()=>{(()=>{const e=t("div","","header");e.append(t("h1","Virtual Keyboard","header__text")),e.append(t("div","","subheading")),n.append(e);const s=document.querySelector(".subheading");s.append(t("p","Change Language: Shift + Alt","subheading__text")),s.append(t("p","Made for: Windows","subheading__text"))})(),n.append(s),n.append(o.generateKeyboard()),n.append(a),document.addEventListener("keydown",(e=>{const t=document.querySelector(`[data-code=${e.code}]`);t&&(t.classList.add("active"),c(e,t,e.code))})),document.addEventListener("keyup",(e=>{const t=document.querySelector(`[data-code=${e.code}]`);t&&(t.classList.remove("active"),"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||(o.removeShift(e),o.updateKeyboard(e)))})),document.querySelector(".keyboard").addEventListener("click",(e=>{if(e.target.closest(".key")){const t=e.target.closest(".key");"ShiftLeft"!==t.dataset.code&&"ShiftRight"!==t.dataset.code||(o.shift=!o.shift,t.classList.toggle("active")),c(e,t,t.dataset.code)}}))}})();